<h1>Rotation</h1>
<section>
    <p>{{rotation_msg}}</p>
    {{#runs}}
        <p>{{runs}} ({{runs_percent}}%) of 168 runs completed. {{num_cards}} cards have hits.</p>
        <p>Stats on undecided cards are redacted to reduce rampant market manipulation.</p>
        {{#rotation_query}}
            <p>
                <form class="inline">
                    <input type="text" name="rq" value="{{rotation_query}}">
                    <button type="submit">Search</button>
                </form>
            </p>
        {{/rotation_query}}
        {{> spinner}}
        <table class="highlights">{{! Allow overflow-x so highlighting shows in left margin.}}
            <thead>
                <tr>
                    <th>⇅</th>
                    <th>Card</th>
                    <th class="n">Hits</th>
                    <th class="n">Needed</th>
                    <th>Status</th>
            </thead>
            <tbody>
                {{#cards}}
                    <tr>
                        <td>{{#hit_in_last_run}}↑{{/hit_in_last_run}}{{^hit_in_last_run}}↓{{/hit_in_last_run}}</td>
                        <td>{{> singlecard}}</td>
                        <td class="n">{{hits}} ({{percent}}%)</td>
                        <td class="n">{{hits_needed}} ({{percent_needed}}%)</td>
                        <td>{{status}}</td>
                    </tr>
                {{/cards}}
            </tbody>
        </table>
        {{> rotationkey}}
    {{/runs}}
</section>
{{#in_rotation}}
    {{^rotation_query}}
        <section>
            <h2>Search</h2>
            <form>
                <p>Search using Scryfall syntax.</p>
                <div>
                    <label>Query</label>
                    <input type="text" name="rq" value="{{rotation_query}}">
                </div>
                <button type="submit">Search</button>
                <p>Warning: can be very slow.</p>
            </form>
        </section>
    {{/rotation_query}}
{{/in_rotation}}
